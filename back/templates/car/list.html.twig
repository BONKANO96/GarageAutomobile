{# templates/car/list.html.twig #}

{% extends 'base.html.twig' %}

{% block title %}Liste des Voitures{% endblock %}

{% block body %}
<div class="container mt-5">
    <h1 class="mb-4">Liste des Voitures</h1>

    <!-- Filtres de recherche -->
    <form method="get" action="{{ path('car_list') }}" class="mb-4">
        <div class="row">
            <div class="col-md-4">
                <label for="min_price">Prix Minimum</label>
                <input type="number" id="min_price" name="min_price" class="form-control" value="{{ app.request.get('min_price') }}">
            </div>
            <div class="col-md-4">
                <label for="max_price">Prix Maximum</label>
                <input type="number" id="max_price" name="max_price" class="form-control" value="{{ app.request.get('max_price') }}">
            </div>
        </div>

        <div class="row mt-3">
            <div class="col-md-4">
                <label for="min_year">Année Minimum</label>
                <input type="number" id="min_year" name="min_year" class="form-control" value="{{ app.request.get('min_year') }}">
            </div>
            <div class="col-md-4">
                <label for="max_year">Année Maximum</label>
                <input type="number" id="max_year" name="max_year" class="form-control" value="{{ app.request.get('max_year') }}">
            </div>
        </div>

        <div class="row mt-3">
            <div class="col-md-4">
                <label for="min_mileage">Kilométrage Minimum</label>
                <input type="number" id="min_mileage" name="min_mileage" class="form-control" value="{{ app.request.get('min_mileage') }}">
            </div>
            <div class="col-md-4">
                <label for="max_mileage">Kilométrage Maximum</label>
                <input type="number" id="max_mileage" name="max_mileage" class="form-control" value="{{ app.request.get('max_mileage') }}">
            </div>
        </div>

        <div class="row mt-4">
            <div class="col-md-6">
                <button type="submit" class="btn btn-primary">Rechercher</button>
                <a href="{{ path('car_list') }}" class="btn btn-danger">Annuler les filtres</a>
            </div>
        </div>
    </form>

    <!-- Liste des voitures -->
    <div class="row">
        {% for car in cars %}
        <div class="col-md-4 mb-4">
            <div class="card h-100 animate__animated animate__fadeInUp">
                <img src="{{ asset('uploads/' ~ car.mainImageFilename) }}" class="img-fluid card-img-top" alt="{{ car.id }}">
                <div class="card-body">
                    <h5 class="card-title">Model {{ car.id }}</h5>
                    <p class="card-text">{{ car.description }}</p>

                    <ul class="list-inline">
                        <li class="list-inline-item badge bg-warning text-dark">{{ car.year }}</li>
                        <li class="list-inline-item badge bg-primary">{{ car.mileage }} km</li>
                    </ul>

                    <div class="mt-3">
                        <p class="mb-0 text-muted">Prix : {{ car.price | number_format(2, ',', ' ') }} €</p>
                    </div>
                </div>
                <div class="card-footer text-center">
                    <a href="#" class="btn btn-info">Voir les détails</a>
                </div>
            </div>
        </div>
        {% else %}
            <p>Aucune voiture disponible.</p>
        {% endfor %}
    </div>
</div>
{% endblock %}
